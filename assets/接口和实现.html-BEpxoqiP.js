import{_ as s,c as n,o as a,d as e}from"./app-CJMzYWoP.js";const p={},l=e(`<p>在 <code>AppServiceProvider</code> 中注册接口和实现的绑定是 Laravel 的一种常见做法，但你提出了一个很好的问题。让我解释一下原因，并提供一些替代方案：</p><ol><li>为什么在 <code>AppServiceProvider</code> 中注册： <ul><li><code>AppServiceProvider</code> 是 Laravel 应用的主要服务提供者，它在应用启动时就会被加载。</li><li>它提供了一个集中的地方来注册所有的服务绑定，使得管理这些绑定变得更加容易。</li><li>对于小型到中型的应用来说，这通常是一个足够好的解决方案。</li></ul></li><li>替代方案： <ul><li>创建专门的 <code>RepositoryServiceProvider</code></li><li>如果你的应用有很多仓库，或者你想要更好地组织你的服务提供者，你可以创建一个专门的 RepositoryServiceProvider：<code>php artisan make:provider RepositoryServiceProvider</code></li><li>然后在 <code>config/app.php</code> 中注册这个新的服务提供者：<div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token string single-quoted-string">&#39;providers&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token comment">// 其他服务提供者...</span></span>
<span class="line">    <span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\\</span>Providers<span class="token punctuation">\\</span>RepositoryServiceProvider</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><h2 id="使用-laravel-的自动注册功能" tabindex="-1"><a class="header-anchor" href="#使用-laravel-的自动注册功能"><span>使用 Laravel 的自动注册功能</span></a></h2><p>如果你的仓库实现总是一对一地对应接口，你可以利用 Laravel 的自动注册功能。在 AppServiceProvider 的 register 方法中添加：</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">app</span><span class="token operator">-&gt;</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name static-context">RepositoryServiceProvider</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="接口-interfaces" tabindex="-1"><a class="header-anchor" href="#接口-interfaces"><span>接口（Interfaces）</span></a></h2><p>接口在 Laravel 和 PHP 中定义了一个类应该实现的方法的契约。它们不包含任何实现，只定义了方法的签名。</p><p><strong>优点</strong>：</p><ul><li>提供了一个清晰的契约，定义了类应该做什么，而不是怎么做。</li><li>允许多个类实现相同的接口，提高了代码的灵活性。</li><li>便于进行单元测试，因为可以轻松地模拟接口。</li></ul><p><strong>例子</strong>:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Contracts<span class="token punctuation">\\</span>Repositories</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name-definition class-name">UserRepositoryInterface</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">create</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实现-implementations" tabindex="-1"><a class="header-anchor" href="#实现-implementations"><span>实现（Implementations）</span></a></h2><p>实现是接口的具体实现。它们提供了接口中定义的方法的实际代码。</p><h3 id="例子" tabindex="-1"><a class="header-anchor" href="#例子"><span>例子</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Repositories</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Contracts<span class="token punctuation">\\</span>Repositories<span class="token punctuation">\\</span>UserRepositoryInterface</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">UserRepository</span> <span class="token keyword">implements</span> <span class="token class-name">UserRepositoryInterface</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 实现获取所有用户的逻辑</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 实现查找特定用户的逻辑</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">create</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 实现创建用户的逻辑</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务提供者-service-providers" tabindex="-1"><a class="header-anchor" href="#服务提供者-service-providers"><span>服务提供者（Service Providers）</span></a></h2><p>服务提供者是 Laravel 应用程序的中心，负责绑定服务到容器、注册事件、中间件等。它们是应用程序的引导机制。</p><p>主要功能：</p><ul><li>注册：绑定服务到服务容器</li><li>引导：在应用程序启动时执行一些操作</li><li>Laravel 中有两种主要类型的服务提供者：</li><li>延迟提供者：只在服务被请求时才会被加载</li><li>即时提供者：在每次请求时都会被加载</li></ul><h3 id="创建服务提供者" tabindex="-1"><a class="header-anchor" href="#创建服务提供者"><span>创建服务提供者</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">php artisan make:provider RepositoryServiceProvider</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>服务提供者结构：</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Providers</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Support<span class="token punctuation">\\</span>ServiceProvider</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">RepositoryServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 在这里进行绑定</span></span>
<span class="line">        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">app</span><span class="token operator">-&gt;</span><span class="token function">bind</span><span class="token punctuation">(</span></span>
<span class="line">            <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>Contracts<span class="token punctuation">\\</span>Repositories<span class="token punctuation">\\</span>UserRepositoryInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>Repositories<span class="token punctuation">\\</span>UserRepository</span><span class="token operator">::</span><span class="token keyword">class</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 在这里进行引导操作</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注册服务提供者：</p><p>在 <code>config/app.php</code> 文件中添加：</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token string single-quoted-string">&#39;providers&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token comment">// 其他提供者...</span></span>
<span class="line">    <span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\\</span>Providers<span class="token punctuation">\\</span>RepositoryServiceProvider</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="依赖注入和服务容器" tabindex="-1"><a class="header-anchor" href="#依赖注入和服务容器"><span>依赖注入和服务容器</span></a></h2><p>Laravel 的服务容器负责管理类的依赖和执行依赖注入。当你在类的构造函数中类型提示一个接口时，Laravel 会自动解析并注入该接口的实现。</p><p><strong>例子</strong>：</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token variable">$users</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">UserRepositoryInterface</span> <span class="token variable">$users</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">users</span> <span class="token operator">=</span> <span class="token variable">$users</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个例子中，Laravel 会自动注入 UserRepository 的实例，因为我们在服务提供者中绑定了 UserRepositoryInterface 到 UserRepository。</p><h2 id="使用接口和实现的好处" tabindex="-1"><a class="header-anchor" href="#使用接口和实现的好处"><span>使用接口和实现的好处</span></a></h2><ul><li>解耦：代码依赖于抽象（接口）而不是具体实现，使得更换实现变得容易。</li><li>可测试性：可以轻松地模拟接口进行单元测试。</li><li>可维护性：接口提供了清晰的契约，使得代码更容易理解和维护。</li><li>灵活性：可以轻松地切换不同的实现，而不需要修改使用该接口的代码。</li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结：</span></a></h2><p>Laravel 的接口、实现和服务提供者共同工作，提供了一个强大的依赖注入系统。这个系统允许你编写松耦合、可测试和可维护的代码。通过使用这些特性，你可以构建出更加灵活和可扩展的应用程序。</p><h2 id="对于小型项目-是否有必要使用接口" tabindex="-1"><a class="header-anchor" href="#对于小型项目-是否有必要使用接口"><span>对于小型项目，是否有必要使用接口?</span></a></h2><p>对于小型项目，是否使用接口确实是一个需要权衡的问题。让我们来分析一下使用和不使用接口的优缺点，以帮助你做出决定：</p><p><strong>不使用接口的优点</strong>：</p><ol><li>简单直接：代码结构更简单，更容易理解和维护。</li><li>开发速度快：不需要为每个类创建对应的接口，可以更快地开发功能。</li><li>文件更少：不需要额外的接口文件，项目结构更加精简。</li></ol><p><strong>使用接口的优点</strong>：</p><ol><li>更好的抽象：接口提供了清晰的契约，定义了类应该实现的方法。</li><li>提高可测试性：使用接口可以更容易地进行单元测试和模拟。</li><li>未来的灵活性：如果项目将来需要扩展，接口可以提供更好的扩展性。</li><li>强制规范：接口可以强制开发者遵守某些规范，有助于保持代码质量。</li></ol><p>考虑到你的项目是小型项目，我的建议是：</p><ol><li>如果你是唯一的开发者，并且项目预期不会有大的扩展： <ol><li>可以不使用接口，直接实现具体的类。</li><li>专注于编写清晰、简洁的代码和良好的文档。</li></ol></li><li>如果项目可能会扩大，或者有多人协作： <ol><li>考虑在关键的、可能需要多种实现的部分使用接口。</li><li>例如，可以为数据访问层（如仓库类）创建接口，因为这些部分最有可能在未来需要不同的实现（如切换数据库、添加缓存等）。</li></ol></li><li>折中方案： <ol><li>开始时不使用接口，但保持良好的代码组织和解耦。</li><li>如果发现某些部分确实需要更好的抽象或可能有多种实现，再为这些部分添加接口。</li></ol></li></ol><p>示例：不使用接口的简化版本</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line">// [WarehouseRepository.php]</span>
<span class="line"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Repositories</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Company</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Pagination<span class="token punctuation">\\</span>LengthAwarePaginator</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">WarehouseRepository</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getWarehousesForCompany</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Company</span> <span class="token variable">$company</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$criteria</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">LengthAwarePaginator</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token variable">$company</span><span class="token operator">-&gt;</span><span class="token function">warehouses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sort&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;asc&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;desc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$criteria</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;search&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;like&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;%&#39;</span> <span class="token operator">.</span> <span class="token variable">$criteria</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;search&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;%&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token variable">$criteria</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;per_page&#39;</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line">// [WarehouseService.php]</span>
<span class="line"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Services</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Company</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Repositories<span class="token punctuation">\\</span>WarehouseRepository</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Pagination<span class="token punctuation">\\</span>LengthAwarePaginator</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">WarehouseService</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token variable">$warehouseRepository</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">WarehouseRepository</span> <span class="token variable">$warehouseRepository</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">warehouseRepository</span> <span class="token operator">=</span> <span class="token variable">$warehouseRepository</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getWarehousesForCompany</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Company</span> <span class="token variable">$company</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$criteria</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">LengthAwarePaginator</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">warehouseRepository</span><span class="token operator">-&gt;</span><span class="token function">getWarehousesForCompany</span><span class="token punctuation">(</span><span class="token variable">$company</span><span class="token punctuation">,</span> <span class="token variable">$criteria</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种方法简化了代码结构，但仍然保持了服务和仓库的分离，这有助于代码的组织和可能的未来扩展。记住，好的代码组织和清晰的职责分离比使用接口更重要。如果你的代码结构良好，将来需要添加接口也会相对容易。</p><p>总之，对于小型项目，可以先不使用接口，专注于编写清晰、可维护的代码。如果项目开始变大或者你发现某些部分确实需要更好的抽象，再考虑引入接口。</p>`,48),i=[l];function t(c,o){return a(),n("div",null,i)}const u=s(p,[["render",t],["__file","接口和实现.html.vue"]]),d=JSON.parse(`{"path":"/laravel/%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%AE%9E%E7%8E%B0.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"使用 Laravel 的自动注册功能","slug":"使用-laravel-的自动注册功能","link":"#使用-laravel-的自动注册功能","children":[]},{"level":2,"title":"接口（Interfaces）","slug":"接口-interfaces","link":"#接口-interfaces","children":[]},{"level":2,"title":"实现（Implementations）","slug":"实现-implementations","link":"#实现-implementations","children":[{"level":3,"title":"例子","slug":"例子","link":"#例子","children":[]}]},{"level":2,"title":"服务提供者（Service Providers）","slug":"服务提供者-service-providers","link":"#服务提供者-service-providers","children":[{"level":3,"title":"创建服务提供者","slug":"创建服务提供者","link":"#创建服务提供者","children":[]}]},{"level":2,"title":"依赖注入和服务容器","slug":"依赖注入和服务容器","link":"#依赖注入和服务容器","children":[]},{"level":2,"title":"使用接口和实现的好处","slug":"使用接口和实现的好处","link":"#使用接口和实现的好处","children":[]},{"level":2,"title":"总结：","slug":"总结","link":"#总结","children":[]},{"level":2,"title":"对于小型项目，是否有必要使用接口?","slug":"对于小型项目-是否有必要使用接口","link":"#对于小型项目-是否有必要使用接口","children":[]}],"git":{"updatedTime":1726930181000,"contributors":[{"name":"BaronYan","email":"1229598328@qq.com","commits":1}]},"filePathRelative":"laravel/接口和实现.md","excerpt":"<p>在 <code>AppServiceProvider</code> 中注册接口和实现的绑定是 Laravel 的一种常见做法，但你提出了一个很好的问题。让我解释一下原因，并提供一些替代方案：</p>\\n<ol>\\n<li>为什么在 <code>AppServiceProvider</code> 中注册：\\n<ul>\\n<li><code>AppServiceProvider</code> 是 Laravel 应用的主要服务提供者，它在应用启动时就会被加载。</li>\\n<li>它提供了一个集中的地方来注册所有的服务绑定，使得管理这些绑定变得更加容易。</li>\\n<li>对于小型到中型的应用来说，这通常是一个足够好的解决方案。</li>\\n</ul>\\n</li>\\n<li>替代方案：\\n<ul>\\n<li>创建专门的 <code>RepositoryServiceProvider</code></li>\\n<li>如果你的应用有很多仓库，或者你想要更好地组织你的服务提供者，你可以创建一个专门的 RepositoryServiceProvider：<code>php artisan make:provider RepositoryServiceProvider</code></li>\\n<li>然后在 <code>config/app.php</code> 中注册这个新的服务提供者：<div class=\\"language-php\\" data-highlighter=\\"prismjs\\" data-ext=\\"php\\" data-title=\\"php\\"><pre class=\\"language-php\\"><code><span class=\\"line\\"><span class=\\"token string single-quoted-string\\">'providers'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">[</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\">// 其他服务提供者...</span></span>\\n<span class=\\"line\\">    <span class=\\"token class-name class-name-fully-qualified static-context\\">App<span class=\\"token punctuation\\">\\\\</span>Providers<span class=\\"token punctuation\\">\\\\</span>RepositoryServiceProvider</span><span class=\\"token operator\\">::</span><span class=\\"token keyword\\">class</span><span class=\\"token punctuation\\">,</span></span>\\n<span class=\\"line\\"><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span></span>\\n<span class=\\"line\\"></span></code></pre></div></li>\\n</ul>\\n</li>\\n</ol>"}`);export{u as comp,d as data};
